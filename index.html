<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width,initial-scale=1.0">
  <title>TV+</title>
  <meta name="description" content="Descubre pel√≠culas en estreno y series en emisi√≥n con TV+, una plataforma gratuita, r√°pida y actualizada. Sin registro, sin permisos invasivos.">
  <link rel="canonical" href="https://koowexa.github.io/TV-/">
  <meta property="og:type" content="website">
  <meta property="og:title" content="TV+">
  <meta property="og:description" content="Descubre pel√≠culas en estreno y series en emisi√≥n con TV+, una plataforma gratuita, r√°pida y actualizada.">
  <meta property="og:image" content="https://github.com/KOOWEXA/TV-/raw/refs/heads/main/TV.png">
  <meta property="og:url" content="https://koowexa.github.io/TV-/">
  <meta property="og:locale" content="es_ES">
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:title" content="TV+">
  <meta name="twitter:description" content="Descubre pel√≠culas en estreno y series en emisi√≥n con TV+, una plataforma gratuita, r√°pida y actualizada.">
  <meta name="twitter:image" content="https://github.com/KOOWEXA/TV-/raw/refs/heads/main/TV.png">
  <link rel="icon" href="https://github.com/KOOWEXA/TV-/raw/refs/heads/main/TV.png" type="image/png">
  <style>
    :root{--primary:#e50914;--primary-hover:#f40612;--bg:#121212;--card-bg:#1f1f1f;--text:#ffffff;--text-secondary:#b3b3b3;--text-muted:#666;--radius:12px;--shadow:0 8px 24px rgba(0,0,0,.5);--success:#4ade80;--promo:#ff6f00}
    *{box-sizing:border-box;margin:0;padding:0}
    body{font-family:'Segoe UI',system-ui,sans-serif;background:var(--bg);color:var(--text);display:flex;flex-direction:column;align-items:center;justify-content:center;padding:20px;margin:0;min-height:100vh;position:relative;overflow:hidden}
    #onboarding{width:100%;max-width:600px;background:var(--card-bg);padding:32px;border-radius:var(--radius);box-shadow:var(--shadow);text-align:center;z-index:10}
    #onboarding h2{font-size:1.8em;margin-bottom:16px}
    #onboarding p{color:var(--text-secondary);line-height:1.6;margin:12px 0}
    .permissions-list{text-align:left;background:rgba(255,255,255,.05);padding:16px;border-radius:8px;margin:20px 0}
    .permissions-list li{margin:8px 0;color:var(--text)}
    #accept-btn{background:var(--primary);color:white;border:none;padding:12px 24px;font-size:1.1em;font-weight:600;border-radius:30px;cursor:pointer;margin-top:20px;transition:background .2s,transform .1s}
    #accept-btn:hover{background:var(--primary-hover);transform:scale(1.03)}
    #main-app{display:none;width:100%;max-width:600px}
    .top-bar{position:absolute;top:16px;left:16px;display:flex;align-items:center;gap:8px;z-index:100}
    .logo-small{width:32px;height:32px;border-radius:8px}
    .follow-btn{background:var(--primary);color:white;text-decoration:none;padding:4px 10px;border-radius:12px;font-size:.85em;font-weight:600;transition:background .2s}
    .follow-btn:hover{text-decoration:none;background:var(--primary-hover)}
    h1{font-size:1.8em;margin:10px 0;text-align:center}
    .filters{display:flex;gap:12px;margin:16px 0;flex-wrap:wrap;justify-content:center}
    .filter-btn{padding:10px 20px;font-size:1em;background:#333;color:var(--text-secondary);border:1px solid #444;border-radius:30px;cursor:pointer;transition:all .2s}
    .filter-btn.active{background:var(--primary);color:white;border-color:var(--primary)}
    .status-bar{font-size:.85em;color:var(--text-muted);margin-top:4px;text-align:center;min-height:1.4em}
    .countdown{font-weight:bold;color:var(--success)}
    .movie-card{background:var(--card-bg);max-width:600px;width:100%;padding:20px;border-radius:var(--radius);box-shadow:var(--shadow);text-align:center;margin-top:16px;opacity:0;transform:translateY(10px);transition:opacity .4s ease,transform .4s ease}
    .movie-card.visible{opacity:1;transform:translateY(0)}
    .movie-poster{max-width:100%;border-radius:var(--radius);display:block;margin:0 auto 16px;aspect-ratio:2/3;object-fit:cover;background:#333}
    .movie-title{font-size:1.6em;margin:12px 0;font-weight:600}
    .movie-overview{font-size:1em;line-height:1.6;color:var(--text-secondary)}
    button.action-btn{padding:12px 24px;font-size:1em;margin-top:20px;background:var(--primary);color:white;border:none;border-radius:30px;cursor:pointer;font-weight:600;transition:background .2s,transform .1s;box-shadow:0 4px 12px rgba(229,9,20,.3)}
    button.action-btn:hover:not(:disabled){background:var(--primary-hover);transform:scale(1.03)}
    button.action-btn:disabled{opacity:.6;cursor:not-allowed;transform:none}
    .loading{font-size:1.3em;margin-top:30px;color:var(--text-secondary);display:none}
    .error{color:#ff6b6b;padding:16px;background:rgba(255,107,107,.1);border-radius:var(--radius);margin-top:20px}
    .promo-banner{position:fixed;bottom:20px;left:50%;transform:translateX(-50%);background:var(--promo);color:white;padding:12px 20px;border-radius:30px;box-shadow:0 4px 12px rgba(0,0,0,.3);font-weight:600;text-align:center;z-index:1000;max-width:90%;opacity:0;transition:opacity .4s ease}
    .promo-banner.show{opacity:1}
    .promo-banner a{color:white;text-decoration:underline}
    .watermark{position:fixed;bottom:10px;right:10px;color:rgba(255,255,255,.3);font-size:.8em;pointer-events:none;z-index:999}
    @media(max-width:600px){#onboarding{padding:24px 16px}.filter-btn{padding:8px 16px;font-size:.9em}.movie-title{font-size:1.4em}h1{font-size:1.5em}.action-btn{padding:10px 20px;font-size:.95em}.top-bar{top:12px;left:12px}.logo-small{width:28px;height:28px}.promo-banner{padding:10px 16px;font-size:.9em}}
    @media(prefers-reduced-motion:reduce){*{animation-duration:.01ms!important;animation-iteration-count:1!important;transition-duration:.01ms!important}}
  </style>
</head>
<body>
  <div id="onboarding" role="dialog" aria-labelledby="onboarding-title" aria-describedby="onboarding-desc">
    <h2 id="onboarding-title">üé¨ Bienvenido a TV+</h2>
    <p id="onboarding-desc">TV+ es una plataforma que te sugiere <strong>pel√≠culas en estreno</strong> o <strong>series en emisi√≥n</strong> de forma aleatoria y actualizada.</p>
    <p>Disfruta de recomendaciones sin necesidad de permisos invasivos. Solo necesitas conexi√≥n a internet.</p>
    <ul class="permissions-list" role="list">
      <li role="listitem"><strong>‚úÖÔ∏è</strong> Sencillo</li>
      <li role="listitem"><strong>‚úÖÔ∏è</strong> R√°pido</li>
      <li role="listitem"><strong>‚úÖÔ∏è</strong> Gratis</li>
      <li role="listitem"><strong>‚úÖÔ∏è</strong> Actualizado</li>
      <li role="listitem"><strong>‚úÖÔ∏è</strong> Con anuncios</li>
    </ul>
    <button id="accept-btn" aria-label="Aceptar y comenzar a usar TV+">Empezar</button>
  </div>
  <div id="main-app" role="main" aria-live="polite">
    <div class="top-bar" role="banner">
      <img src="https://github.com/KOOWEXA/TV-/raw/refs/heads/main/TV.png" alt="TV+" class="logo-small" loading="lazy">
      <a href="https://whatsapp.com/channel/0029Vb6sN8kL7UVSCeAQgA2f" target="_blank" rel="noopener noreferrer nofollow" class="follow-btn" aria-label="Seguir canal de TV+ en WhatsApp">Seguir</a>
    </div>
    <h1>TV+</h1>
    <div class="filters" role="radiogroup" aria-label="Filtrar contenido por tipo">
      <button class="filter-btn active" data-type="movie" role="radio" aria-checked="true">Pel√≠culas (en estreno)</button>
      <button class="filter-btn" data-type="tv" role="radio" aria-checked="false">Series (en emisi√≥n)</button>
    </div>
    <div class="status-bar" id="status-bar">
      <span id="last-update" aria-label="Hora de la √∫ltima actualizaci√≥n"></span> ‚Ä¢ Pr√≥xima actualizaci√≥n: <span id="countdown" class="countdown" aria-label="Tiempo restante para la pr√≥xima actualizaci√≥n">--:--</span>
    </div>
    <button id="load-btn" class="action-btn" aria-label="Cargar una nueva recomendaci√≥n">¬øQU√â VER? +</button>
    <div id="loading" class="loading" role="status" aria-live="polite">Cargando...</div>
    <div id="movie-container" class="movie-card" role="region" aria-label="Contenido recomendado"></div>
    <div id="promo-banner" class="promo-banner" role="alert" aria-live="assertive">
      ¬øBuscas algo m√°s? ¬°Descubre <a href="https://koowexa.github.io/kooprome/" target="_blank" rel="noopener noreferrer nofollow">ExoBazar</a>!
    </div>
    <div class="watermark" aria-hidden="true">TV+</div>
  </div>
  <script>
    const CONFIG={API_KEY:'487ec2ee423ac20f42f80d2ee5aebab8',BASE_URL:'https://api.themoviedb.org/3',IMG_BASE_URL:'https://image.tmdb.org/t/p/w500',MAX_RETRIES:3,INITIAL_DELAY:1000,AUTO_UPDATE_INTERVAL:5*60*1000};
    const State={currentType:'movie',currentAbortController:null,autoUpdateTimer:null,lastUpdate:null,isPageVisible:true,isLoading:false,lastItem:null,cache:{movie:[],tv:[]},cacheExpiry:{movie:0,tv:0},interactionCount:0};
    function cleanup(){if(State.currentAbortController){State.currentAbortController.abort();State.currentAbortController=null}if(State.autoUpdateTimer){clearTimeout(State.autoUpdateTimer);State.autoUpdateTimer=null}}
    function formatTime(date){return new Intl.DateTimeFormat('es-ES',{hour:'2-digit',minute:'2-digit'}).format(date)}
    function maybeShowPromo(){State.interactionCount++;if(State.interactionCount>=3||(State.lastUpdate&&Date.now()-State.lastUpdate.getTime()>2*60*1000)){const promo=document.getElementById('promo-banner');if(!promo.classList.contains('show')){promo.classList.add('show');setTimeout(()=>{promo.classList.remove('show')},8000)}}}
    async function fetchWithRetry(url,retries=CONFIG.MAX_RETRIES,delay=CONFIG.INITIAL_DELAY){for(let i=0;i<=retries;i++){try{const res=await fetch(url,{signal:State.currentAbortController?.signal,headers:{Accept:'application/json'}});if(!res.ok){if(res.status===429&&i<retries){await new Promise(r=>setTimeout(r,delay*(2**i)));continue}throw new Error(`HTTP ${res.status}`)}return await res.json()}catch(err){if(err.name==='AbortError')throw err;if(i===retries)throw err;await new Promise(r=>setTimeout(r,delay*(2**i)))}}}
    async function fetchMoviesNowPlaying(){const now=Date.now();if(State.cache.movie.length>0&&now<State.cacheExpiry.movie){return State.cache.movie}const data=await fetchWithRetry(`${CONFIG.BASE_URL}/movie/now_playing?api_key=${CONFIG.API_KEY}&language=es-ES&region=ES`);const valid=(data.results||[]).filter(m=>m.poster_path&&m.title&&m.release_date);State.cache.movie=valid;State.cacheExpiry.movie=now+15*60*1000;return valid}
    async function fetchTVOnTheAir(){const now=Date.now();if(State.cache.tv.length>0&&now<State.cacheExpiry.tv){return State.cache.tv}const data=await fetchWithRetry(`${CONFIG.BASE_URL}/tv/on_the_air?api_key=${CONFIG.API_KEY}&language=es-ES`);const valid=(data.results||[]).filter(s=>s.poster_path&&s.name);State.cache.tv=valid;State.cacheExpiry.tv=now+15*60*1000;return valid}
    async function getRandomContent(type){let items=[];if(type==='movie'){items=await fetchMoviesNowPlaying()}else if(type==='tv'){items=await fetchTVOnTheAir()}if(items.length===0){throw new Error(type==='movie'?'No hay pel√≠culas en estreno actualmente.':'No hay series en emisi√≥n actualmente.')}return items[Math.floor(Math.random()*items.length)]}
    function renderContent(item,type){const container=document.getElementById('movie-container');container.innerHTML='';const img=document.createElement('img');img.className='movie-poster';img.src=`${CONFIG.IMG_BASE_URL}${item.poster_path}`;img.alt=type==='movie'?`P√≥ster de ${item.title}`:`P√≥ster de ${item.name}`;img.loading='lazy';img.onerror=()=>{img.src='https://via.placeholder.com/300x450?text=Sin+imagen';img.alt='Imagen no disponible'};const title=document.createElement('div');title.className='movie-title';const name=type==='movie'?item.title:item.name;const year=type==='movie'?(item.release_date?item.release_date.substring(0,4):'N/A'):(item.first_air_date?item.first_air_date.substring(0,4):'N/A');title.textContent=`${name} (${year})`;const overview=document.createElement('p');overview.className='movie-overview';overview.textContent=item.overview?.trim()||'Sin descripci√≥n disponible.';container.appendChild(img);container.appendChild(title);container.appendChild(overview);container.classList.add('visible');State.lastItem={item,type}}
    function renderError(message){const container=document.getElementById('movie-container');container.innerHTML='';const err=document.createElement('div');err.className='error';err.textContent=`‚ùå ${message}`;container.appendChild(err);container.classList.add('visible')}
    async function loadContent(isAuto=false){if(!State.isPageVisible&&isAuto)return;if(State.isLoading)return;State.isLoading=true;cleanup();State.currentAbortController=new AbortController();const btn=document.getElementById('load-btn');const loading=document.getElementById('loading');const container=document.getElementById('movie-container');btn.disabled=true;loading.style.display='block';container.classList.remove('visible');try{const item=await getRandomContent(State.currentType);renderContent(item,State.currentType);State.lastUpdate=new Date();document.getElementById('last-update').textContent=`√öltima: ${formatTime(State.lastUpdate)}`;updateCountdown();if(!isAuto)maybeShowPromo()}catch(error){console.error('Error al cargar contenido:',error);if(State.lastItem&&!isAuto){renderContent(State.lastItem.item,State.lastItem.type)}else{renderError(error.message||'No se pudo cargar contenido. Int√©ntalo m√°s tarde.')}}finally{loading.style.display='none';btn.disabled=false;State.isLoading=false;if(isAuto)scheduleAutoUpdate()}}
    function updateCountdown(){if(!State.lastUpdate){document.getElementById('countdown').textContent='--:--';return}const next=new Date(State.lastUpdate.getTime()+CONFIG.AUTO_UPDATE_INTERVAL);const now=new Date();if(next<=now){document.getElementById('countdown').textContent='--:--';return}const diff=next-now;const mins=Math.floor(diff/60000);const secs=Math.floor((diff%60000)/1000);document.getElementById('countdown').textContent=`${String(mins).padStart(2,'0')}:${String(secs).padStart(2,'0')}`;setTimeout(updateCountdown,1000)}
    function scheduleAutoUpdate(){cleanup();State.autoUpdateTimer=setTimeout(()=>loadContent(true),CONFIG.AUTO_UPDATE_INTERVAL);updateCountdown()}
    document.getElementById('accept-btn').addEventListener('click',()=>{document.getElementById('onboarding').style.display='none';document.getElementById('main-app').style.display='block';initApp()});
    function initApp(){let visibilityDebounce=null;document.addEventListener('visibilitychange',()=>{State.isPageVisible=!document.hidden;if(visibilityDebounce)clearTimeout(visibilityDebounce);if(State.isPageVisible&&State.lastUpdate){visibilityDebounce=setTimeout(()=>{const elapsed=Date.now()-State.lastUpdate.getTime();const remaining=Math.max(0,CONFIG.AUTO_UPDATE_INTERVAL-elapsed);if(!State.autoUpdateTimer){State.autoUpdateTimer=setTimeout(()=>loadContent(true),remaining)}},300)}});document.querySelectorAll('.filter-btn').forEach(btn=>{btn.addEventListener('click',()=>{if(btn.classList.contains('active'))return;document.querySelectorAll('.filter-btn').forEach(b=>b.classList.remove('active'));btn.classList.add('active');State.currentType=btn.dataset.type;loadContent(false)})});document.getElementById('load-btn').addEventListener('click',()=>loadContent(false));loadContent(false);updateCountdown();window.addEventListener('beforeunload',cleanup)}
  </script>
</body>
</html>